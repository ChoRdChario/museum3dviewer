<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>LociMyu v6.6</title>
  <style>
    /* Non-invasive base styles (kept minimal) */
    body{margin:0;background:#0f1013;color:#e7e9ee;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;}
    .app{display:grid;grid-template-columns:1fr 380px;min-height:100vh;}
    .viewport{background:#0b0c10;}
    .rightpane{background:#111318;border-left:1px solid #23262d;display:flex;flex-direction:column;}
    .tabs{display:flex;gap:16px;padding:10px 12px;border-bottom:1px solid #23262d;position:sticky;top:0;background:#111318;z-index:3;}
    .card{padding:12px;margin:12px;border:1px solid #23262d;border-radius:10px;background:#0f1116;}
    .section-title{font-size:14px;}
    /* IDs/classes that existing code likely expects */
    #panel-material.lm-panel-material.card { }
  </style>
</head>
<body>
  <div class="app">
    <div id="viewport" class="viewport"><!-- three.js canvas injected by existing boot --></div>
    <aside class="rightpane">
      <nav class="tabs">
        <span>Caption</span>
        <span>Material</span>
        <span>Views</span>
      </nav>
      <!-- Existing app will synthesize/anchor panels; we provide a canonical material panel container -->
      <section id="panel-material" class="lm-panel-material card">
        <!-- Our runtime patch will create pm-opacity block here if missing -->
      </section>
    </aside>
  </div>

  <!-- Existing app scripts (keep your originals in place). They are referenced by name used in logs. -->
  <script type="module" src="./boot.esm.cdn.js"></script>
  <script type="module" src="./viewer.module.cdn.js"></script>
  <script type="module" src="./viewer.bridge.module.js"></script>
  <script src="./glb.load.signal.js"></script>
  <script type="module" src="./materials.sheet.bridge.js"></script>

  <!-- Non-destructive material stack (must be near the end) -->
  <script src="./material.runtime.patch.js"></script>
  <script src="./material.dropdown.patch.js"></script>
  <script src="./material.orchestrator.js"></script>

  <!-- Optional: developer helper, ignored if missing -->
  <script src="./content.js" defer></script>
</body>
</html>